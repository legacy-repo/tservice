<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>tservice.lib.files documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Tservice</span> <span class="project-version">0.3.2-1-1354c68-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tservice</span></div></div></li><li class="depth-2 branch"><a href="tservice.config.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>config</span></div></a></li><li class="depth-2 branch"><a href="tservice.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>db</span></div></div></li><li class="depth-3 branch"><a href="tservice.db.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3 branch"><a href="tservice.db.handler.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>handler</span></div></a></li><li class="depth-3"><a href="tservice.db.sql-helper.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sql-helper</span></div></a></li><li class="depth-2 branch"><a href="tservice.dev-middleware.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>dev-middleware</span></div></a></li><li class="depth-2 branch"><a href="tservice.env.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>env</span></div></a></li><li class="depth-2 branch"><a href="tservice.events.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>events</span></div></a></li><li class="depth-2 branch"><a href="tservice.handler.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>handler</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>lib</span></div></div></li><li class="depth-3 branch"><a href="tservice.lib.csv.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>csv</span></div></a></li><li class="depth-3 branch current"><a href="tservice.lib.files.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>files</span></div></a></li><li class="depth-3 branch"><a href="tservice.lib.filter-files.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>filter-files</span></div></a></li><li class="depth-3"><a href="tservice.lib.fs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fs</span></div></a></li><li class="depth-2"><a href="tservice.middleware.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>middleware</span></div></a></li><li class="depth-3 branch"><a href="tservice.middleware.exception.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>exception</span></div></a></li><li class="depth-3"><a href="tservice.middleware.formats.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>formats</span></div></a></li><li class="depth-2 branch"><a href="tservice.nrepl.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>nrepl</span></div></a></li><li class="depth-2 branch"><a href="tservice.plugin.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>plugin</span></div></a></li><li class="depth-2 branch"><a href="tservice.plugin-jars.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>plugin-jars</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>plugins</span></div></div></li><li class="depth-3 branch"><a href="tservice.plugins.classloader.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>classloader</span></div></a></li><li class="depth-3 branch"><a href="tservice.plugins.dependencies.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dependencies</span></div></a></li><li class="depth-3 branch"><a href="tservice.plugins.init-steps.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>init-steps</span></div></a></li><li class="depth-3 branch"><a href="tservice.plugins.initialize.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>initialize</span></div></a></li><li class="depth-3"><a href="tservice.plugins.plugin-proxy.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>plugin-proxy</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -176px;"><span class="top" style="height: 185px;"></span><span class="bottom"></span></span><span>routes</span></div></div></li><li class="depth-3 branch"><a href="tservice.routes.report.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>report</span></div></a></li><li class="depth-3 branch"><a href="tservice.routes.services.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>services</span></div></a></li><li class="depth-3"><a href="tservice.routes.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li><li class="depth-2 branch"><a href="tservice.setup.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>setup</span></div></a></li><li class="depth-2"><a href="tservice.task.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>task</span></div></a></li><li class="depth-3"><a href="tservice.task.sync-reports.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sync-reports</span></div></a></li><li class="depth-2 branch"><a href="tservice.util.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>vendor</span></div></div></li><li class="depth-3"><a href="tservice.vendor.multiqc.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>multiqc</span></div></a></li><li class="depth-1"><a href="user.html"><div class="inner"><span class="tree" style="top: -1168px;"><span class="top" style="height: 1177px;"></span><span class="bottom"></span></span><span>user</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="tservice.lib.files.html#var-call-command.21"><div class="inner"><span>call-command!</span></div></a></li><li class="depth-1"><a href="tservice.lib.files.html#var-copy-file.21"><div class="inner"><span>copy-file!</span></div></a></li><li class="depth-1"><a href="tservice.lib.files.html#var-copy-files.21"><div class="inner"><span>copy-files!</span></div></a></li><li class="depth-1"><a href="tservice.lib.files.html#var-correct-filepath"><div class="inner"><span>correct-filepath</span></div></a></li><li class="depth-1"><a href="tservice.lib.files.html#var-create-dir-if-not-exists.21"><div class="inner"><span>create-dir-if-not-exists!</span></div></a></li><li class="depth-1"><a href="tservice.lib.files.html#var-decompress-archive"><div class="inner"><span>decompress-archive</span></div></a></li><li class="depth-1"><a href="tservice.lib.files.html#var-do-with-open-path-to-resource"><div class="inner"><span>do-with-open-path-to-resource</span></div></a></li><li class="depth-1"><a href="tservice.lib.files.html#var-exist-bin.3F"><div class="inner"><span>exist-bin?</span></div></a></li><li class="depth-1"><a href="tservice.lib.files.html#var-exists.3F"><div class="inner"><span>exists?</span></div></a></li><li class="depth-1"><a href="tservice.lib.files.html#var-extract-env-from-archive"><div class="inner"><span>extract-env-from-archive</span></div></a></li><li class="depth-1"><a href="tservice.lib.files.html#var-file-exists-in-archive.3F"><div class="inner"><span>file-exists-in-archive?</span></div></a></li><li class="depth-1"><a href="tservice.lib.files.html#var-files-seq"><div class="inner"><span>files-seq</span></div></a></li><li class="depth-1"><a href="tservice.lib.files.html#var-get-path"><div class="inner"><span>get-path</span></div></a></li><li class="depth-1"><a href="tservice.lib.files.html#var-get-path-variable"><div class="inner"><span>get-path-variable</span></div></a></li><li class="depth-1"><a href="tservice.lib.files.html#var-get-plugin-dir"><div class="inner"><span>get-plugin-dir</span></div></a></li><li class="depth-1"><a href="tservice.lib.files.html#var-get-plugin-jar-dir"><div class="inner"><span>get-plugin-jar-dir</span></div></a></li><li class="depth-1"><a href="tservice.lib.files.html#var-get-workdir"><div class="inner"><span>get-workdir</span></div></a></li><li class="depth-1"><a href="tservice.lib.files.html#var-hashmap-.3Eparameters"><div class="inner"><span>hashmap-&gt;parameters</span></div></a></li><li class="depth-1"><a href="tservice.lib.files.html#var-is-localpath.3F"><div class="inner"><span>is-localpath?</span></div></a></li><li class="depth-1"><a href="tservice.lib.files.html#var-long-str"><div class="inner"><span>long-str</span></div></a></li><li class="depth-1"><a href="tservice.lib.files.html#var-readable.3F"><div class="inner"><span>readable?</span></div></a></li><li class="depth-1"><a href="tservice.lib.files.html#var-regular-file.3F"><div class="inner"><span>regular-file?</span></div></a></li><li class="depth-1"><a href="tservice.lib.files.html#var-render-template"><div class="inner"><span>render-template</span></div></a></li><li class="depth-1"><a href="tservice.lib.files.html#var-slurp-file-from-archive"><div class="inner"><span>slurp-file-from-archive</span></div></a></li><li class="depth-1"><a href="tservice.lib.files.html#var-which"><div class="inner"><span>which</span></div></a></li><li class="depth-1"><a href="tservice.lib.files.html#var-with-open-path-to-resource"><div class="inner"><span>with-open-path-to-resource</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">tservice.lib.files</h1><div class="doc"><pre class="plaintext">Low-level file-related functions for implementing TService plugin functionality. These use the `java.nio.file`
library rather than the usual `java.io` stuff because it abstracts better across different filesystems (such as
files in a normal directory vs files inside a JAR.)
As much as possible, this namespace aims to abstract away the `nio.file` library and expose a set of high-level
*file-manipulation* functions for the sorts of operations the plugin system needs to perform.</pre></div><div class="public anchor" id="var-call-command.21"><h3>call-command!</h3><div class="usage"><code>(call-command! cmd parameters-coll)</code><code>(call-command! cmd)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-copy-file.21"><h3>copy-file!</h3><div class="usage"><code>(copy-file! source dest)</code></div><div class="doc"><pre class="plaintext">Copy a file from `source` -&gt; `dest`.
</pre></div></div><div class="public anchor" id="var-copy-files.21"><h3>copy-files!</h3><div class="usage"><code>(copy-files! source-dir dest-dir)</code></div><div class="doc"><pre class="plaintext">Copy all files in `source-dir` to `dest-dir`. Overwrites existing files if last modified timestamp is not the same as
that of the source file â€” see #11699 for more context.</pre></div></div><div class="public anchor" id="var-correct-filepath"><h3>correct-filepath</h3><div class="usage"><code>(correct-filepath filepath)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-create-dir-if-not-exists.21"><h3>create-dir-if-not-exists!</h3><div class="usage"><code>(create-dir-if-not-exists! path)</code></div><div class="doc"><pre class="plaintext">Self-explanatory. Create a directory with `path` if it does not already exist.
</pre></div></div><div class="public anchor" id="var-decompress-archive"><h3>decompress-archive</h3><div class="usage"><code>(decompress-archive arch-name out-folder)</code></div><div class="doc"><pre class="plaintext">decompress data from archive to `out-folder` directory.
Warning! In `out-folder` files will be overwritten by decompressed data from `arch-name`.
</pre></div></div><div class="public anchor" id="var-do-with-open-path-to-resource"><h3>do-with-open-path-to-resource</h3><div class="usage"><code>(do-with-open-path-to-resource resource f)</code></div><div class="doc"><pre class="plaintext">Impl for `with-open-path-to-resource`.
</pre></div></div><div class="public anchor" id="var-exist-bin.3F"><h3>exist-bin?</h3><div class="usage"><code>(exist-bin? name)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-exists.3F"><h3>exists?</h3><div class="usage"><code>(exists? path)</code></div><div class="doc"><pre class="plaintext">Does file at `path` actually exist?
</pre></div></div><div class="public anchor" id="var-extract-env-from-archive"><h3>extract-env-from-archive</h3><div class="usage"><code>(extract-env-from-archive archive-path path-component dest-dir)</code></div><div class="doc"><pre class="plaintext">Extract the entire contents of a file from a archive (such as a JAR).
</pre></div></div><div class="public anchor" id="var-file-exists-in-archive.3F"><h3>file-exists-in-archive?</h3><div class="usage"><code>(file-exists-in-archive? archive-path &amp; path-components)</code></div><div class="doc"><pre class="plaintext">True is a file exists in an archive.
</pre></div></div><div class="public anchor" id="var-files-seq"><h3>files-seq</h3><div class="usage"><code>(files-seq path)</code></div><div class="doc"><pre class="plaintext">Get a sequence of all files in `path`, presumably a directory or an archive of some sort (like a JAR).
</pre></div></div><div class="public anchor" id="var-get-path"><h3>get-path</h3><div class="usage"><code>(get-path &amp; path-components)</code></div><div class="doc"><pre class="plaintext">Get a `Path` for a file or directory in the default (i.e., system) filesystem named by string path component(s).
(get-path "/Users/cam/tservice/tservice/plugins")
;; -&gt; #object[sun.nio.fs.UnixPath 0x4d378139 "/Users/cam/tservice/tservice/plugins"]</pre></div></div><div class="public anchor" id="var-get-path-variable"><h3>get-path-variable</h3><div class="usage"><code>(get-path-variable)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-get-plugin-dir"><h3>get-plugin-dir</h3><div class="usage"><code>(get-plugin-dir)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-get-plugin-jar-dir"><h3>get-plugin-jar-dir</h3><div class="usage"><code>(get-plugin-jar-dir)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-get-workdir"><h3>get-workdir</h3><div class="usage"><code>(get-workdir)</code><code>(get-workdir type)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-hashmap-.3Eparameters"><h3>hashmap-&gt;parameters</h3><div class="usage"><code>(hashmap-&gt;parameters coll)</code></div><div class="doc"><pre class="plaintext">{ '-d' 'true' '-o' 'output' } -&gt; '-d true -o output'
</pre></div></div><div class="public anchor" id="var-is-localpath.3F"><h3>is-localpath?</h3><div class="usage"><code>(is-localpath? filepath)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-long-str"><h3>long-str</h3><div class="usage"><code>(long-str &amp; strings)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-readable.3F"><h3>readable?</h3><div class="usage"><code>(readable? path)</code></div><div class="doc"><pre class="plaintext">True if we can read the file at `path`.
</pre></div></div><div class="public anchor" id="var-regular-file.3F"><h3>regular-file?</h3><div class="usage"><code>(regular-file? path)</code></div><div class="doc"><pre class="plaintext">True if `path` refers to a regular file (as opposed to something like directory).
</pre></div></div><div class="public anchor" id="var-render-template"><h3>render-template</h3><div class="usage"><code>(render-template template env-context)</code></div><div class="doc"><pre class="plaintext">TODO: Schema for rendering environment.

Arguments:
  env-context: {:ENV_DEST_DIR " "
                :ENV_NAME "pgi"
                :CLONE_ENV_BIN ""}
</pre></div></div><div class="public anchor" id="var-slurp-file-from-archive"><h3>slurp-file-from-archive</h3><div class="usage"><code>(slurp-file-from-archive archive-path &amp; path-components)</code></div><div class="doc"><pre class="plaintext">Read the entire contents of a file from a archive (such as a JAR).
</pre></div></div><div class="public anchor" id="var-which"><h3>which</h3><div class="usage"><code>(which bin-name)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-with-open-path-to-resource"><h3>with-open-path-to-resource</h3><h4 class="type">macro</h4><div class="usage"><code>(with-open-path-to-resource [path-binding resource-filename-str] &amp; body)</code></div><div class="doc"><pre class="plaintext">Execute `body` with an Path to a resource file or directory (i.e. a file in the project `resources/` directory, or
inside the uberjar), cleaning up when finished.
Throws a FileNotFoundException if the resource does not exist; be sure to check with `io/resource` or similar before
calling this.
  (with-open-path-to-resouce [path "modules"]
     ...)</pre></div></div></div></body></html>